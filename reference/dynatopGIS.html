<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>R6 Class for processing a catchment to make a Dynamic TOPMODEL — dynatopGIS • dynatopGIS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="R6 Class for processing a catchment to make a Dynamic TOPMODEL — dynatopGIS" />
<meta property="og:description" content="This package contains the code for setting up a dynamic TOPMODEL implimentation" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynatopGIS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9032</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dynatopGIS.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Banding.html">Distance Calculations</a>
    </li>
    <li>
      <a href="../articles/sink_filling.html">Filling sinks and gaps in the DEM</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/waternumbers/dynatopGIS/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 Class for processing a catchment to make a Dynamic TOPMODEL</h1>
    <small class="dont-index">Source: <a href='https://github.com/waternumbers/dynatopGIS/blob/master/R/dygis.R'><code>R/dygis.R</code></a>, <a href='https://github.com/waternumbers/dynatopGIS/blob/master/R/dynatopGIS-package.R'><code>R/dynatopGIS-package.R</code></a></small>
    <div class="hidden name"><code>dynatopGIS.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This package contains the code for setting up a dynamic TOPMODEL implimentation</p>
    </div>



    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>dynatopGIS$new()</code></a></p></li>
<li><p><a href='#method-get_meta'><code>dynatopGIS$get_meta()</code></a></p></li>
<li><p><a href='#method-get_working_directory'><code>dynatopGIS$get_working_directory()</code></a></p></li>
<li><p><a href='#method-set_working_directory'><code>dynatopGIS$set_working_directory()</code></a></p></li>
<li><p><a href='#method-add_dem'><code>dynatopGIS$add_dem()</code></a></p></li>
<li><p><a href='#method-add_channel'><code>dynatopGIS$add_channel()</code></a></p></li>
<li><p><a href='#method-add_layer'><code>dynatopGIS$add_layer()</code></a></p></li>
<li><p><a href='#method-get_layer'><code>dynatopGIS$get_layer()</code></a></p></li>
<li><p><a href='#method-plot_layer'><code>dynatopGIS$plot_layer()</code></a></p></li>
<li><p><a href='#method-sink_fill'><code>dynatopGIS$sink_fill()</code></a></p></li>
<li><p><a href='#method-compute_areas'><code>dynatopGIS$compute_areas()</code></a></p></li>
<li><p><a href='#method-compute_properties'><code>dynatopGIS$compute_properties()</code></a></p></li>
<li><p><a href='#method-compute_flow_lengths'><code>dynatopGIS$compute_flow_lengths()</code></a></p></li>
<li><p><a href='#method-classify'><code>dynatopGIS$classify()</code></a></p></li>
<li><p><a href='#method-create_model'><code>dynatopGIS$create_model()</code></a></p></li>
<li><p><a href='#method-input_frac'><code>dynatopGIS$input_frac()</code></a></p></li>
<li><p><a href='#method-get_version'><code>dynatopGIS$get_version()</code></a></p></li>
<li><p><a href='#method-get_class_method'><code>dynatopGIS$get_class_method()</code></a></p></li>
<li><p><a href='#method-get_model'><code>dynatopGIS$get_model()</code></a></p></li>
<li><p><a href='#method-plot_model'><code>dynatopGIS$plot_model()</code></a></p></li>
<li><p><a href='#method-neighbour'><code>dynatopGIS$neighbour()</code></a></p></li>
<li><p><a href='#method-get_class'><code>dynatopGIS$get_class()</code></a></p></li>
<li><p><a href='#method-plot_class'><code>dynatopGIS$plot_class()</code></a></p></li>
<li><p><a href='#method-get_channel'><code>dynatopGIS$get_channel()</code></a></p></li>
<li><p><a href='#method-clone'><code>dynatopGIS$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>Initialise a project, or reopen an existing project</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='va'>meta_file</span>, check <span class='op'>=</span> <span class='cn'>TRUE</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>meta_file</code></dt><dd><p>filename and path of the meta data file</p></dd>

<dt><code>check</code></dt><dd><p>logical, should checks be performed [TRUE]</p></dd>

<dt><code>verbose</code></dt><dd><p>printing of checking output [TRUE]</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>This loads the meta data file found at <code>meta_path</code>, or creates it with a warning if no file is present. It <code>check</code> is <code>TRUE</code> then the meta data file contents are checked witht he level of returned information being controlled by <code>verbose</code>.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>A new `dynatopGIS` object</p>
<p><hr>
<a id="method-get_meta"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_meta()</code></h3>
<p>Get project emta data</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_meta</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-get_working_directory"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_working_directory()</code></h3>
<p>Get current working directory</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_working_directory</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Newly generated layers are added to the working directory. By deafult this is the directory containing the meta date file.</p>

<p><hr>
<a id="method-set_working_directory"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>set_working_directory()</code></h3>
<p>Set current working directory</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>set_working_directory</span><span class='op'>(</span><span class='va'>file_path</span>, create <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>file_path</code></dt><dd><p>the path to the new directory to create</p></dd>

<dt><code>create</code></dt><dd><p>should the driectory be created if it doesn't exist</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Newly generated layers are added to the working directory. By deafult this is the directory containing the meta date file.</p>

<p><hr>
<a id="method-add_dem"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>add_dem()</code></h3>
<p>Import a dem to the `dynatopGIS` object</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>add_dem</span><span class='op'>(</span><span class='va'>dem</span>, fill_na <span class='op'>=</span> <span class='cn'>TRUE</span>, verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>dem</code></dt><dd><p>a <code>RasterLayer</code> object or the path to file containing one which is the DEM</p></dd>

<dt><code>fill_na</code></dt><dd><p>should NA values in dem be filled. See details</p></dd>

<dt><code>verbose</code></dt><dd><p>Should additional progress information be printed</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>If not a <code>rasterLayer</code> the DEM is read in using the raster package. If <code>fill_na</code> is <code>TRUE</code> all NA values other then those that link to the edge of the dem are filled so they can be identified as sinks.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>suitable for chaining</p>
<p><hr>
<a id="method-add_channel"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>add_channel()</code></h3>
<p>Import channel data from an OGR file to the `dynatopGIS` object</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>add_channel</span><span class='op'>(</span>
  <span class='va'>channel</span>,
  property_names <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>length <span class='op'>=</span> <span class='st'>"length"</span>, startNode <span class='op'>=</span> <span class='st'>"startNode"</span>, endNode <span class='op'>=</span> <span class='st'>"endNode"</span>,
    width <span class='op'>=</span> <span class='st'>"width"</span><span class='op'>)</span>,
  default_width <span class='op'>=</span> <span class='fl'>2</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>channel</code></dt><dd><p>a SpatialLinesDataFrame, SpatialPolygonsDataFrame or file path containing the channel information</p></dd>

<dt><code>property_names</code></dt><dd><p>named vector of columns of the spatial data frame to use for channel properties - asee details</p></dd>

<dt><code>default_width</code></dt><dd><p>default width of a channel if not specified in property_names. Defaults to 2 metres.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Takes the input channel converts it a SpatialPolygonDataFrame with properties length, startNode and endNode. The variable names in the sp_object data frame which corresponding to these properties can be specified in the <code>property_names</code> vector. In the channel is a SpatialLinesDataFrame (or read in as one) an additional property width is used to buffer the lines and create channel polygons. If required the width property is created using the default value. Note that any columns called length, startNode, endNode  and width are overwritten. Any column called id is copied to a column original_id then overwritten.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>suitable for chaining</p>
<p><hr>
<a id="method-add_layer"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>add_layer()</code></h3>
<p>Add a layer of geographical information</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>add_layer</span><span class='op'>(</span><span class='va'>layer_name</span>, <span class='va'>file_path</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>name to give to the layer</p></dd>

<dt><code>file_path</code></dt><dd><p>the location of the file containing the new layer</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>The file given is read by the <code>raster</code> package and checked against the project meta data. Only layer names not already in use (or reserved) are allowed. If successful the meta data for the project are altered to reflect the new layer name and file location.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>suitable for chaining</p>
<p><hr>
<a id="method-get_layer"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_layer()</code></h3>
<p>Get a layer of geographical information or a list of layer names</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_layer</span><span class='op'>(</span>layer_name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>character</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>name of the layer give to the layer</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a RasterLayer of the requested information if layer_name is given else a vector of layer names</p>
<p><hr>
<a id="method-plot_layer"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>plot_layer()</code></h3>
<p>Plot a layer</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>plot_layer</span><span class='op'>(</span><span class='va'>layer_name</span>, add_channel <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>the name of layer to plot</p></dd>

<dt><code>add_channel</code></dt><dd><p>shouel the channel be added to the plot</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a plot</p>
<p><hr>
<a id="method-sink_fill"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>sink_fill()</code></h3>
<p>The sink filling algorithm of Planchona and Darboux 2001</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>sink_fill</span><span class='op'>(</span>
  min_grad <span class='op'>=</span> <span class='fl'>1e-04</span>,
  max_it <span class='op'>=</span> <span class='fl'>1e+06</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  hot_start <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>min_grad</code></dt><dd><p>Minimum gradient between cell centres</p></dd>

<dt><code>max_it</code></dt><dd><p>maximum number of replacement cycles</p></dd>

<dt><code>verbose</code></dt><dd><p>print out additional diagnostic information</p></dd>

<dt><code>hot_start</code></dt><dd><p>start from filled_dem if it exists</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>The algorithm implimented in Planchona and Darboux, "A fast, simple and versatile algorithm to fill the depressions in digital elevation models" Catena 46 (2001). A pdf can be found at https://horizon.documentation.ird.fr/exl-doc/pleins_textes/pleins_textes_7/sous_copyright/010031925.pdf.</p>

<p><hr>
<a id="method-compute_areas"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>compute_areas()</code></h3>
<p>Computes area maps and presence of channel in dem pixels</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>compute_areas</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>The algorithm calculates the land and channel area for each DEM pixel assigning a channel_id to each pixel with a channel area.</p>

<p><hr>
<a id="method-compute_properties"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>compute_properties()</code></h3>
<p>Computes statistics e.g. gradient, log(a/tanb) for raster cells</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>compute_properties</span><span class='op'>(</span>min_grad <span class='op'>=</span> <span class='fl'>1e-04</span>, verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>min_grad</code></dt><dd><p>gradient that can be assigned to a pixel if it can't be computed</p></dd>

<dt><code>verbose</code></dt><dd><p>print out additional diagnostic information</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>The algorithm passed through the cells in decreasing height. Min grad is applied to all cells. It is also used for missing gradients in pixels which are partially channel but have no upslope neighbours.</p>

<p><hr>
<a id="method-compute_flow_lengths"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>compute_flow_lengths()</code></h3>
<p>Computes flow length for each pixel to the channel</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>compute_flow_lengths</span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>verbose</code></dt><dd><p>print out additional diagnostic information</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>The algorithm passed through the cells in increaing height. For measures of flow length to the channel are computed. The shortest length (minimum length to channel through any flow path), the dominant length (the length taking the flow diection with the highest fraction for each pixel on the path) and expected flow length (flow length based on sum of downslope flow lengths based on fraction of flow to each cell) and band (strict sequence to ensure that all contributing cell have a higher band value). By definition cells in the channel that have no land area have a length (or band) of NA.</p>

<p><hr>
<a id="method-classify"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>classify()</code></h3>
<p>Create a catchment classification based on any number of landscape layer cuts or burns</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>classify</span><span class='op'>(</span><span class='va'>layer_name</span>, <span class='va'>cuts</span>, burns <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>name of the new layer to create</p></dd>

<dt><code>cuts</code></dt><dd><p>A named list of cuts of make to form the HRU. Names should correspond to raster layers in the project directory. Values should be numeric and define either the number of bands (single value) or breaks between band (multiple values). A value of <code>NA</code> implies to layer is already cut and can be used in the classification directly.</p></dd>

<dt><code>burns</code></dt><dd><p>a vector of layer names which are to be burnt on</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>This applies the given cuts to the supplied landscape layers to produce areal groupings of the catchment. Burns are added directly in the order they are given. Cuts are impliment using <code><a href='https://rdrr.io/pkg/raster/man/cut.html'>raster::cut</a></code> with <code>include.lowest = TRUE</code>. Note that is specifying a vector of cuts values outside the limits will be set to NA.</p>

<p><hr>
<a id="method-create_model"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>create_model()</code></h3>
<p>Compute a Dynamic TOPMODEL</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>create_model</span><span class='op'>(</span>
  <span class='va'>layer_name</span>,
  <span class='va'>class_layer</span>,
  <span class='va'>dist_layer</span>,
  transmissivity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"exponential"</span>, <span class='st'>"bounded_exponential"</span>, <span class='st'>"constant"</span><span class='op'>)</span>,
  channel_solver <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"histogram"</span><span class='op'>)</span>,
  dist_delta <span class='op'>=</span> <span class='fl'>0</span>,
  rain_layer <span class='op'>=</span> <span class='cn'>NULL</span>,
  rain_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>character</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span>,
  pet_layer <span class='op'>=</span> <span class='cn'>NULL</span>,
  pet_label <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>character</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>name for the new model and layers</p></dd>

<dt><code>class_layer</code></dt><dd><p>the layer defining the topographic classes</p></dd>

<dt><code>dist_layer</code></dt><dd><p>the layer defining the distances to the channel</p></dd>

<dt><code>transmissivity</code></dt><dd><p>transmissivity profile to use</p></dd>

<dt><code>channel_solver</code></dt><dd><p>channel solver to use</p></dd>

<dt><code>dist_delta</code></dt><dd><p>used in computing flow linkages see details</p></dd>

<dt><code>rain_layer</code></dt><dd><p>the layer defining the rainfall inputs</p></dd>

<dt><code>rain_label</code></dt><dd><p>Prepended to rain_layer values to give rainfall series name</p></dd>

<dt><code>pet_layer</code></dt><dd><p>the layer defining the pet inputs</p></dd>

<dt><code>pet_label</code></dt><dd><p>Prepended to pet_layer values to give pet series name</p></dd>

<dt><code>verbose</code></dt><dd><p>print more details of progress</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>The <code>class_layer</code> is used to define the HRUs. Flow between HRUs is based on the distance to a channel. For each HRU the shortest distance to a channel is computed. Flow from a HRU can only go to a HRU with a lower shortest distance to the channel. Flow from a HRU can occur from any raster cell within the HRU whose distance to the channel is within dist_delta ot the shortest distance within the HRU.
Setting the transmissivity and channel_solver options ensure the model is set up with the correct parameters present.
The <code>rain_layer</code> (<code>pet_layer</code>) can contain the numeric id values of different rainfall (pet) series. If the value of <code>rain_layer</code> (<code>pet_layer</code>) is not <code>NULL</code> the weights used to compute an averaged input value for each HRU are computed, overwise an input table for the models gernerated with the value "missing" used in place of the series name.</p>

<p><hr>
<a id="method-input_frac"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>input_frac()</code></h3>
<p>Compute HSU fractional inputs</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>input_frac</span><span class='op'>(</span>
  <span class='va'>hsu_layer</span>,
  <span class='va'>input_layer</span>,
  hsu_label <span class='op'>=</span> <span class='st'>"hsu_"</span>,
  input_label <span class='op'>=</span> <span class='st'>""</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>hsu_layer</code></dt><dd><p>layer of the model</p></dd>

<dt><code>input_layer</code></dt><dd><p>raster of values containing the input class</p></dd>

<dt><code>hsu_label</code></dt><dd><p>string containing the label to add the values of hsu_layer</p></dd>

<dt><code>input_label</code></dt><dd><p>string containing the label to add the values of input_layer</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Fractions are computed for all HSUs (including the channel) using raster::crosstab. It does not accout for unequal cells areas or HSUs which only cover a fraction of a cell</p>

<p><hr>
<a id="method-get_version"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_version()</code></h3>
<p>get the version number</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_version</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>teh version number indicates the version of the algorithms within the object</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a numeric version number</p>
<p><hr>
<a id="method-get_class_method"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_class_method()</code></h3>
<p>get the cuts and burns used to classify</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_class_method</span><span class='op'>(</span><span class='va'>layer_name</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>the name of layer whose classification method is returned</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a list with two elements, cuts and burns</p>
<p><hr>
<a id="method-get_model"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_model()</code></h3>
<p>DEPRECIATED Get the model is a form suitable for dynatop</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_model</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a Dynamic TOPMODE description suitable for the <code>dyantop</code> package</p>
<p><hr>
<a id="method-plot_model"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>plot_model()</code></h3>
<p>DEPRECIATED Plot the spatial properties of a model</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>plot_model</span><span class='op'>(</span>add_channel <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>add_channel</code></dt><dd><p>should the channel be added to the plot</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-neighbour"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>neighbour()</code></h3>
<p>DEPRECIATED Return the index of neighbouring cells</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>neighbour</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>x</code></dt><dd><p>index of cells for which to find neighbours</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a list of indexes of neighbours</p>
<p><hr>
<a id="method-get_class"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_class()</code></h3>
<p>DEPECIATED Get a classification layer of geographical information or a list of layer names</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_class</span><span class='op'>(</span><span class='va'>layer_name</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>name of the layer give to the layer</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a RasterLayer of the requested information if layer_name is given else a vector of layer names</p>
<p><hr>
<a id="method-plot_class"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>plot_class()</code></h3>
<p>DEPECIATED Plot a classification layer</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>plot_class</span><span class='op'>(</span>layer_name <span class='op'>=</span> <span class='st'>"final"</span>, add_channel <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>layer_name</code></dt><dd><p>the name of layer to plot</p></dd>

<dt><code>add_channel</code></dt><dd><p>shouel the channel be added to the plot</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>a plot</p>
<p><hr>
<a id="method-get_channel"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>get_channel()</code></h3>
<p>DEPRECIATED Get the channel description</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>get_channel</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>an SpatialPolygonDataFrame containing the channels</p>
<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>dynatopGIS</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul Smith.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


